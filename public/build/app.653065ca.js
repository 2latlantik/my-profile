(self.webpackChunkmy_profile=self.webpackChunkmy_profile||[]).push([[143],{5579:(e,t,n)=>{var i={"./hello_controller.js":4695};function l(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}l.keys=function(){return Object.keys(i)},l.resolve=a,e.exports=l,l.id=5579},8205:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i={}},4695:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});n(8304),n(489),n(2419),n(8011),n(9070),n(2526),n(1817),n(1539),n(2165),n(6992),n(8783),n(3948);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var l=u(this).constructor;n=Reflect.construct(i,arguments,l)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,n,i,r=s(u);function u(){return l(this,u),r.apply(this,arguments)}return t=u,(n=[{key:"connect",value:function(){this.element.textContent="Hello Stimulus! Edit me in assets/controllers/hello_controller.js"}}])&&a(t.prototype,n),i&&a(t,i),u}(n(7931).Controller)},5147:(e,t,n)=>{"use strict";(0,n(2192).x)(n(5579)),n(9554),n(4747),n(1038),n(8783);var i=n(6095),l=n.n(i);n(8309),n(9070);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uploadBlock=t,this.file=n,this.setFile(),this.initializeXhr(),this.statesXhr()}var t,n,i;return t=e,(n=[{key:"setFile",value:function(){this.formData=new FormData,this.formData.append("image",this.file,this.file.name)}},{key:"initializeXhr",value:function(){var e=this;this.xhr=new XMLHttpRequest,this.reset(),this.xhr.upload.onprogress=function(t){e.updateProgress(t)}}},{key:"updateProgress",value:function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;t=Math.round(100*t)/100,this.uploadBlock.setProgressBarValue(t)}}},{key:"statesXhr",value:function(){var e=this;this.xhr.onreadystatechange=function(t){e.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&e.headersReceived(),e.xhr.readyState===XMLHttpRequest.LOADING&&e.loading(),e.xhr.readyState===XMLHttpRequest.DONE&&0!=e.xhr.status&&e.done()}}},{key:"headersReceived",value:function(){this.uploadBlock.circleGreenOn(),this.uploadBlock.hideAllMessages()}},{key:"loading",value:function(){this.uploadBlock.circleOrangeOn()}},{key:"done",value:function(){if(this.uploadBlock.circleOrangeOff(),200==this.xhr.status){var e=JSON.parse(this.xhr.responseText);0==e.success?this.error():(this.uploadBlock.setImage(e.name,e.path),this.uploadBlock.defineInputs(e.name,e.path),this.uploadBlock.input_upload.value="",this.uploadBlock.showMessageComplete())}else this.error()}},{key:"error",value:function(){var e=JSON.parse(this.xhr.responseText);this.uploadBlock.circleRedOn(),this.uploadBlock.circleGreenOff(),this.uploadBlock.showMessageError(e.message)}},{key:"reset",value:function(){this.uploadBlock.setProgressBarValue(0,!0),this.uploadBlock.clearMessageError()}},{key:"send",value:function(){this.xhr.open("POST","upload",!0),this.xhr.setRequestHeader("x-file-type",this.file.type),this.xhr.setRequestHeader("x-file-size",this.file.size),this.xhr.setRequestHeader("x-file-name",this.file.name),this.xhr.send(this.formData)}}])&&a(t.prototype,n),i&&a(t,i),e}();function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const r=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.upload_area=t,this.upload_context=t.parentElement,this.setProgressBar(),this.setButtons(),this.setMessages(),this.setInputs(),this.setImages(),this.hideAllMessages(),this.setInputFile(),t.addEventListener("dragover",(function(e){n.dragover(e)})),t.addEventListener("dragleave",(function(e){n.dragleave(e)})),t.addEventListener("drop",(function(e){n.drop(e)}))}var t,n,i;return t=e,i=[{key:"isAdvancedUpload",value:function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}}],(n=[{key:"dragover",value:function(e){e.preventDefault(),e.stopPropagation(),this.upload_area.classList.add("is-dragover")}},{key:"dragleave",value:function(e){e.preventDefault(),e.stopPropagation(),this.upload_area.classList.remove("is-dragover")}},{key:"drop",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.files;Array.from(n).forEach((function(e){new o(t,e).send()}))}},{key:"updateInputFile",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=this.input_upload.files;Array.from(n).forEach((function(e){new o(t,e).send()}))}},{key:"setProgressBar",value:function(){var e=this.upload_context.getElementsByClassName("progress-bar");null!=e.item(0)?this.progressBar=e.item(0):this.progressBar=null}},{key:"setProgressBarValue",value:function(e,t){!0===t&&this.progressBar.classList.add("no_transition"),this.progressBar.value=Math.round(e),this.progressBar.style.width=e+"%",!0===t&&this.progressBar.classList.remove("no_transition")}},{key:"setButtons",value:function(){var e=this.upload_context.getElementsByClassName("circle-green");null!=e.item(0)?this.buttonGreen=e.item(0):this.buttonGreen=null,null!=(e=this.upload_context.getElementsByClassName("circle-orange")).item(0)?this.buttonOrange=e.item(0):this.buttonOrange=null,null!=(e=this.upload_context.getElementsByClassName("circle-red")).item(0)?this.buttonRed=e.item(0):this.buttonRed=null}},{key:"setMessages",value:function(){var e=this.upload_context.getElementsByClassName("upload-complete");null!=e.item(0)?this.uploadComplete=e.item(0):this.uploadComplete=null;var t=this.upload_context.getElementsByClassName("upload-error");null!=t.item(0)?this.uploadError=t.item(0):this.uploadError=null}},{key:"setInputs",value:function(){this.nameFile=this.upload_context.querySelector('[name*="name"]'),this.pathFile=this.upload_context.querySelector('[name*="path"]')}},{key:"defineInputs",value:function(e,t){null!=this.nameFile&&(this.nameFile.value=e),null!=this.pathFile&&(this.pathFile.value=t)}},{key:"setImages",value:function(){var e=this.upload_context.getElementsByTagName("img");null!=e.item(0)?this.imgElement=e.item(0):this.imgElement=null;var t=this.upload_context.getElementsByTagName("svg");null!=t.item(0)?this.svgElement=t.item(0):this.svgElement=null}},{key:"setInputFile",value:function(){var e=this,t=this.upload_area.getElementsByClassName("upload_file");null!=t.item(0)?(this.input_upload=t.item(0),this.input_upload.addEventListener("change",(function(t){e.updateInputFile(t)}))):this.input_upload=null}},{key:"circleGreenOn",value:function(){this.switchOn(this.buttonGreen)}},{key:"circleOrangeOn",value:function(){this.switchOn(this.buttonOrange)}},{key:"circleRedOn",value:function(){this.switchOn(this.buttonGreen)}},{key:"circleGreenOff",value:function(){this.switchOff(this.buttonGreen)}},{key:"circleOrangeOff",value:function(){this.switchOff(this.buttonOrange)}},{key:"circleRedOff",value:function(){this.switchOff(this.buttonGreen)}},{key:"switchOn",value:function(e){e.classList.add("circle-lighter")}},{key:"switchOff",value:function(e){e.classList.remove("circle-lighter")}},{key:"hideAllMessages",value:function(){this.hideMessage(this.uploadError),this.hideMessage(this.uploadComplete)}},{key:"hideMessage",value:function(e){null!=e&&(e.style.display="none")}},{key:"showMessageComplete",value:function(){this.showMessage(this.uploadComplete,"Téléchargement terminé")}},{key:"clearMessageError",value:function(){this.showMessage(this.uploadError,null)}},{key:"showMessageError",value:function(e){this.showMessage(this.uploadError,e)}},{key:"showMessage",value:function(e,t){null!==t?(e.innerHTML=t,e.style.display="block"):(e.innerHTML="",e.style.display="none")}},{key:"setImage",value:function(e,t){if(null!=this.imgElement&&(this.imgElement.src=t),null!=this.svgElement){var n=new Image;n.src=t,this.upload_area.insertBefore(n,this.svgElement),this.svgElement.remove()}}}])&&s(t.prototype,n),i&&s(t,i),e}();function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const c=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.area=t,this.quill=n,this.editor=this.firstElementByClassName("ql-editor",t),this.inputDelta=this.firstElementByClassName("rich--text--delta",t),this.inputHtml=this.firstElementByClassName("rich--text--html",t),this.editor.addEventListener("blur",(function(e){i.blurEditor(e)})),this.setContent()}var t,n,i;return t=e,(n=[{key:"firstElementByClassName",value:function(e,t){var n=t.getElementsByClassName(e);return n.length>0?n[0]:""}},{key:"setContent",value:function(){if(""!==this.inputDelta.value){var e=JSON.parse(this.inputDelta.value);this.quill.setContents(e,"api")}}},{key:"blurEditor",value:function(e){var t=JSON.stringify(this.quill.getContents()),n=this.quill.root.innerHTML;this.inputDelta.value=t,this.inputHtml.value=n}}])&&u(t.prototype,n),i&&u(t,i),e}();function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.range=t,this.findInput(),this.range.addEventListener("change",(function(e){n.changeRange(e)})),this.input.addEventListener("keyup",(function(e){n.changeInput(e)})),this.initiateValues(),this.range.dataset.instanciate=!0}var t,n,i;return t=e,(n=[{key:"firstElementByClassName",value:function(e,t){var n=t.getElementsByClassName(e);return n.length>0?n[0]:""}},{key:"findInput",value:function(){var e=this.range.closest(".row"),t=this.firstElementByClassName("range--value",e);this.input=t}},{key:"changeRange",value:function(e){this.input.value=this.range.value}},{key:"changeInput",value:function(e){this.range.value=this.input.value}},{key:"initiateValues",value:function(){""===this.input.value&&(this.range.value=0,this.input.value=0)}}])&&h(t.prototype,n),i&&h(t,i),e}();n(1058),n(4916),n(5306),n(4603),n(9714);function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.collection=t,"post_adding"in n&&(this.postAdding=n.post_adding),this.initializeProperties(),this.setProperties(n),this.contentArea=this.getContentArea(),this.addingArea=this.getAddingArea(),this.setPrototype(),this.setIndex(0),this.setItemsNumber(),this.collection.dataset.instanciate="true"}var t,n,i;return t=e,i=[{key:"defaultProperties",value:function(){return{button_add:'<button type="button" class="btn btn-primary" ></button>',button_add_value:"Add",allow_add:1,button_delete:'<button type="button" class="btn btn-danger"></button>',button_delete_value:"Delete",allow_delete:1,allow_item_number:1,collection__content:"collection--content",collection__item:"collection--item",collection__add:"collection--add",add__item__collection:"add--item--collection",collection__delete:"collection--delete",delete__item__collection:"delete--item--collection"}}}],(n=[{key:"getContentArea",value:function(){var e=this.collection.getElementsByClassName(this.collection__content);return 0===e.length?this.collection:e[0]}},{key:"getAddingArea",value:function(){var e=this.collection.getElementsByClassName(this.collection__add);return 0===e.length?this.collection:e[0]}},{key:"getDeletingArea",value:function(e){var t=e.getElementsByClassName(this.collection__delete);return 0===t.length?null:t[0]}},{key:"initializeProperties",value:function(){var t=e.defaultProperties();this.buttonAdd=t.button_add,this.buttonAddValue=t.button_add_value,this.allowAdd=t.allow_add,this.buttonDelete=t.button_delete,this.buttonDeleteValue=t.button_delete_value,this.allowDelete=t.allow_delete,this.allowItemNumber=t.allow_item_number,this.collection__content=t.collection__content,this.collection__item=t.collection__item,this.collection__add=t.collection__add,this.add__item__collection=t.add__item__collection,this.collection__delete=t.collection__delete,this.delete__item__collection=t.delete__item__collection}},{key:"setProperties",value:function(e){"button_add"in e&&(this.buttonAdd=e.button_add),"button_add_value"in e&&(this.buttonAddValue=e.button_add_value),"allow_add"in e&&(this.allowAdd=e.allow_add),"button_delete"in e&&(this.buttonDelete=e.button_delete),"button_delete_value"in e&&(this.buttonDeleteValue=e.button_delete_value),"allow_delete"in e&&(this.allowDelete=e.allow_delete),"allow_item_number"in e&&(this.allowItemNumber=e.allow_item_number),"collection__content"in e&&(this.collection__content=e.collection__content),"collection__item"in e&&(this.collection__item=e.collection__item),"collection__add"in e&&(this.collection__add=e.collection__add),"add__item__collection"in e&&(this.add__item__collection=e.add__item__collection),"collection__delete"in e&&(this.collection__delete=e.collection__delete)}},{key:"display",value:function(){this.addAddingButton(),this.setDeleteButtons()}},{key:"setPrototype",value:function(){var e=this.collection.dataset.prototype;this.prototype=e}},{key:"addAddingButton",value:function(){var e=this;if(1===this.allowAdd){0==this.addingArea.getElementsByClassName(this.add__item__collection).length&&this.addingArea.insertAdjacentHTML("beforeend",this.buttonAdd),this.addingArea.getElementsByTagName("button")[this.addingArea.getElementsByTagName("button").length-1].classList.add(this.add__item__collection);var t=this.addingArea.getElementsByClassName(this.add__item__collection)[0];t.innerHTML=this.buttonAddValue,t.addEventListener("click",(function(t){e.addItemToCollection(t)}))}}},{key:"addDeleteButton",value:function(e){var t=this,n=this.getDeletingArea(e);if(1===this.allowDelete&&0==n.getElementsByClassName(this.delete__item__collection).length){n.insertAdjacentHTML("beforeend",this.buttonDelete),n.getElementsByTagName("button")[n.getElementsByTagName("button").length-1].classList.add(this.delete__item__collection);var i=n.getElementsByClassName(this.delete__item__collection)[0];i.innerHTML=this.buttonDeleteValue,i.addEventListener("click",(function(e){t.deleteItemFromCollection(e)}))}}},{key:"setIndex",value:function(e){void 0===this.collection.dataset.index?(e=this.collection.getElementsByClassName(this.collection__item).length,this.collection.dataset.index=e):this.collection.dataset.index=e,this.index=e}},{key:"getIndex",value:function(){return this.collection.dataset.index}},{key:"addItemToCollection",value:function(e){this.index=parseInt(this.getIndex());var t="";if(void 0===this.collection.dataset.prototype_name)t=this.prototype.replace(/__name__/g,this.index);else{var n=this.collection.dataset.prototype_name,i=new RegExp(n,"g");t=this.prototype.replace(i,this.index)}this.contentArea.insertAdjacentHTML("beforeend",t);var l=this.contentArea.querySelectorAll("."+this.collection__item+":last-child");l=0===l.length?null:l[0],this.addDeleteButton(l),"function"==typeof this.postAdding&&this.postAdding(),this.setItemsNumber(),this.setIndex(this.index+1)}},{key:"deleteItemFromCollection",value:function(e){var t=(e.target||e.srcElement).closest("."+this.collection__item);null!==t&&t.parentNode.removeChild(t),this.setItemsNumber()}},{key:"setItemsNumber",value:function(){if(1===this.allowItemNumber){var e=0,t=this.contentArea.querySelectorAll("."+this.collection__item);Array.from(t).forEach((function(t){var n=t.querySelector(".item--number");null!=n&&(e+=1,n.innerHTML=e)}))}}},{key:"setDeleteButtons",value:function(){var e=this,t=this.contentArea.querySelectorAll("."+this.collection__item);Array.from(t).forEach((function(t){e.addDeleteButton(t)}))}}])&&f(t.prototype,n),i&&f(t,i),e}();n(6992),n(1539),n(3948),n(3123),n(3210),n(9600);function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.area=t,this.values=this.firstElementByClassName("tags--values",t),this.input=this.firstElementByClassName("tags--input",t),this.list=this.firstElementByClassName("tags--list",t),this.setEventsListener(),this.initializeTagsValues()}var t,n,i;return t=e,(n=[{key:"setEventsListener",value:function(){var e=this;this.input.addEventListener("keypress",(function(t){e.pressInput(t)})),this.input.addEventListener("blur",(function(t){e.blurInput(t)}))}},{key:"initializeTagsValues",value:function(){var e=this.values.value;if(""!=e)for(var t=e.split(","),n=0;n<t.length;n++)this.appendToList(t[n])}},{key:"firstElementByClassName",value:function(e,t){var n=t.getElementsByClassName(e);return n.length>0?n[0]:""}},{key:"firstElementByTagName",value:function(e,t){var n=t.getElementsByTagName(e);return n.length>0?n[0]:""}},{key:"pressInput",value:function(e){var t=e.which|e.keyCode;(13===t||44===t)&&(this.addTag(),e.preventDefault())}},{key:"blurInput",value:function(e){this.addTag()}},{key:"addTag",value:function(){var e=this.input.value.trim();""!=(e=e.replace(",",""))?(this.checkNewTag(e)&&(this.addInInput(e),this.appendToList(e)),this.input.value=""):this.input.value=""}},{key:"appendToList",value:function(e){var t=this,n=document.createElement("span");n.classList.add("tag");var i=document.createElement("span");i.innerHTML=e,n.appendChild(i);var l=document.createElement("a");l.innerHTML="x",l.href="#",l.title="Removing tag",l.addEventListener("click",(function(e){t.deleteTag(e)})),n.appendChild(l),this.list.appendChild(n)}},{key:"deleteTag",value:function(e){var t=(e.target||e.srcElement).closest(".tag");if(null!==t){t.parentNode.removeChild(t);var n=this.firstElementByTagName("span",t).innerHTML;this.deleteInInput(n)}e.preventDefault()}},{key:"addInInput",value:function(e){var t=this.values.value;t=t+","+e,this.values.value=t}},{key:"deleteInInput",value:function(e){for(var t=new Array,n=this.values.value.split(","),i=0;i<n.length;i++)n[i]!=e&&t.push(n[i]);this.values.value=t.join(",")}},{key:"checkNewTag",value:function(e){var t=this.values.value;return!this.existsTag(t,e)}},{key:"existsTag",value:function(e,t){for(var n=e.split(","),i=0;i<n.length;i++)if(n[i]==t)return!0;return!1}}])&&m(t.prototype,n),i&&m(t,i),e}();var g=n(9755);n.g.$=n.g.jQuery=g,n(5169),n(4728),n.g.Collection=p,n.g.TagsArea=v,n.g.Quill=l(),n.g.RichText=c,n.g.RangeInput=d,g(document).ready((function(){if(g(".js-datepicker").datepicker({format:"dd/mm/yyyy",todayBtn:!0,language:"fr"}),g('[data-toggle="popover"]').popover(),!0===r.isAdvancedUpload()){var e=document.getElementsByClassName("upload_area");Array.from(e).forEach((function(e){new r(e)}))}}));var y=document.getElementsByClassName("editor--area");Array.from(y).forEach((function(e){var t=e.getElementsByClassName("editor--container");if(t.length>0){var n=new(l())(t[0],{modules:{toolbar:[["bold","italic"],["link","blockquote","code-block","image"],[{list:"ordered"},{list:"bullet"}]]},placeholder:"Compose an epic...",theme:"snow"});new c(e,n),e.dataset.instanciate="true"}}))}},e=>{e.O(0,[867],(()=>{return t=5147,e(e.s=t);var t}));e.O()}]);