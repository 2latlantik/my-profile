{% extends 'layout/base.html.twig' %}

{% block body %}
    {% include 'blocks/header.html.twig' with {
        'user'  : app.user
    }
        only
    %}
    <div class="container-fluid wrapper">
        <div class="h1_container">
            <h1 class="h1__public">
                {{ profile.name }} {{ profile.surname }} <br> {{ profile.job }}
            </h1>
        </div>
        <div class="layout__first__level">
            <div class="layout__col3__1">
                <div class="cv__photo_and_skills">
                    <div>
                        <div class="cv__photo">
                            <img src="/{{ profile.profilePicture.files.0.path }}" width="200"/>
                            <ul>
                                <li>{{ 'label.age'|trans({'%count%': profile.birthDate|age}) }}</li>
                                <li>{{ profile.city }}</li>
                            </ul>
                        </div>
                    </div>
                    <div class="cv__skills">
                        {% for tag in profile.tags %}
                            <span class="cv__badge">{{ tag.name }}</span>
                        {% endfor %}
                    </div>
                </div>
                <div class="cv__block">
                    <div class="cv__title">
                        {{ 'label.profile.contact'|trans }}
                    </div>
                    <div class="cv__contact__method">
                        {% if profile.mail is not empty %}
                            <div>
                                <i class="fa fa-envelope-o" aria-hidden="true" data-toggle="popover"
                                   data-placement="bottom" data-content="{{ profile.mail }}"
                                   data-original-title="Mail"></i>
                            </div>
                        {% endif %}
                        {% if profile.phone is not empty %}
                            <div>
                                <i class="fa fa-mobile" aria-hidden="true" data-toggle="popover" data-placement="bottom"
                                   data-content="{{ profile.phone }}" data-original-title="Mobile"></i>
                            </div>
                        {% endif %}
                        {% if profile.viadeo is not empty %}
                            <div>
                                <i class="fa fa-viadeo" aria-hidden="true" data-toggle="popover" data-placement="bottom"
                                   data-content="{{ profile.viadeo }}" data-original-title="Viadeo"></i>
                            </div>
                        {% endif %}
                        {% if profile.linkedin is not empty %}
                            <div>
                                <i class="fa fa-linkedin" aria-hidden="true" data-toggle="popover"
                                   data-placement="bottom" data-content="{{ profile.linkedin }}"
                                   data-original-title="Linkedin"></i>
                            </div>
                        {% endif %}
                    </div>
                </div>
                <div class="cv__block">
                    <div class="cv__title">
                        {{ 'label.profile.situation'|trans }}
                    </div>
                    <div class="cv__body padding_point">
                        {{ ('label.situation_state.' ~ profile.situationState)|trans([], 'form') }}
                    </div>
                    <div class="cv__body">
                        {% if profile.situationGoal == 'active_search' %}
                            <span class="point point--success"></span>
                        {% elseif profile.situationGoal == 'listen_opportunity' %}
                            <span class="point point--warning"></span>
                        {% elseif profile.situationGoal == 'not_listen_opportunity' %}
                            <span class="point point--danger"></span>
                        {% endif %}
                        {{ ('label.situation_goal.' ~ profile.situationGoal)|trans([], 'form') }}
                    </div>
                </div>
                <div class="cv__block">
                    <div class="cv__title">
                        {{ 'label.profile.presentation'|trans }}
                    </div>
                    <div class="cv__body">
                        <div class="body__text">
                            {{ profile.richTextHtml|raw }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="layout__col3__2">
                <div>
                    <h2>
                        <i class="fa fa-briefcase" aria-hidden="true"></i>
                        {{ 'label.profile.professionnals_experiences'|trans }}
                    </h2>
                    <div class="cv__sections">
                        {% for pe in profile.professionnalExperiences %}
                            <div class="cv__section">
                                <h4>{{ pe.title }} </h4>
                                <div class="cv__section__subtitle">{{ pe.society }}</div>
                                <div class="cv__section__mention">
                                    {{ period_start(pe.start, pe.end) }} {{ pe.start|localizeddate('none', 'none', null, null, 'MMMM Y') }}
                                    {% if pe.end is not empty %}
                                        {{ 'message.end'|trans }} {{ pe.end|localizeddate('none', 'none', null, null, 'MMMM Y') }}
                                    {% endif %}
                                </div>
                                {{ pe.richTextHtml|raw }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div>
                    <h2>
                        <i class="fa fa-graduation-cap" aria-hidden="true"></i>
                        {{ 'label.profile.school_path'|trans }}
                    </h2>
                    <div class="cv__sections">
                        {% for sp in profile.schoolPaths %}
                            <div class="cv__section">
                                <h4>{{ sp.title }}</h4>
                                <div>{{ sp.richTextHtml|raw }}</div>
                                <div>{{ sp.school }} </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="layout__col3__3">
                <h2>
                    <i class="fa fa-tasks" aria-hidden="true"></i>
                    {{ 'label.skills'|trans }}
                </h2>
                <div class="cv__sections">
                    {% for sg in profile.skillGroups %}
                        <div class="cv__section">
                            <h4>{{ sg.label }}</h4>
                            <div class="cv__section__skills">
                                {% for skill in sg.skills %}
                                    {% if skill.notEvaluated is same as(false) %}
                                        <div>{{ skill.label }}</div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success progress-bar-striped" role="progressbar"
                                                 aria-valuenow="{{ skill.progression }}" aria-valuemin="0"
                                                 aria-valuemax="100" style="width:{{ skill.progression }}%">
                                                {{ skill.progression }}%
                                            </div>
                                        </div>
                                    {% else %}
                                        <span><i class="fa fa-caret-right"
                                                 aria-hidden="true"></i> {{ skill.label }}</span>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <h2>
                    <i class="fa fa-rocket" aria-hidden="true"></i>
                    {{ 'label.profile.hobbies'|trans }}
                </h2>
                <div class="cv__sections">
                    <div class="cv__section">
                        <div class="cv__section__skills">
                            {{ profile.leisure.richTextHtml|raw }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}